(this["webpackJsonpdemo-dapp"]=this["webpackJsonpdemo-dapp"]||[]).push([[0],{202:function(e,t,n){e.exports=n(476)},207:function(e,t,n){},209:function(e,t,n){},219:function(e,t){},241:function(e,t){},243:function(e,t){},288:function(e,t){},290:function(e,t){},319:function(e,t){},443:function(e,t){},444:function(e,t){},475:function(e,t){var n={contract:{address:"0x948f39835345a2a2Ce19DB649907C02A9d3aAC35",abi:[{constant:!0,inputs:[],name:"getQuote",outputs:[{internalType:"string",name:"currentQuote",type:"string"},{internalType:"address",name:"currentOwner",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"",type:"address"}],name:"nonces",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"quote",outputs:[{internalType:"string",name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"string",name:"newQuote",type:"string"}],name:"setQuote",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"userAddress",type:"address"},{internalType:"string",name:"newQuote",type:"string"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"},{internalType:"uint8",name:"v",type:"uint8"}],name:"setQuoteMeta",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"}]}};e.exports={config:n}},476:function(e,t,n){"use strict";n.r(t);var a,s,r=n(10),o=n.n(r),i=n(103),c=n.n(i),u=(n(207),n(2)),l=n.n(u),d=n(61),p=n(76),m=(n(209),n(195)),f=n.n(m),y=n(196),w=n.n(y),b=n(62),g=(n(474),n(475).config),h=function(e){b.NotificationManager.error(e,"Error",5e3)},v=function(e){b.NotificationManager.success(e,"Message",3e3)},E=function(e){b.NotificationManager.info(e,"Info",3e3)},T={name:"Quote",version:"1",chainId:"80001",verifyingContract:g.contract.address},k=[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],A=[{name:"nonce",type:"uint256"},{name:"from",type:"address"}];var O=function(){var e=Object(r.useState)("Default Owner Address"),t=Object(p.a)(e,2),n=t[0],i=t[1],c=Object(r.useState)("This is a default quote"),u=Object(p.a)(c,2),m=u[0],y=u[1],O=Object(r.useState)(""),M=Object(p.a)(O,2),x=M[0],N=M[1];function j(){return C.apply(this,arguments)}function C(){return(C=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.methods.getQuote().call({from:window.ethereum.selectedAddress});case 2:t=e.sent,console.log("workingggg"),"0x0000000000000000000000000000000000000000"!==t.currentOwner&&(y(t.currentQuote),i(t.currentOwner));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(){return(Q=Object(d.a)(l.a.mark((function e(){var t,n,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(window.ethereum.selectedAddress),N(""),console.log(a),e.next=5,a.methods.nonces(window.ethereum.selectedAddress).call();case 5:t=e.sent,(n={}).nonce=parseInt(t),n.from=window.ethereum.selectedAddress,s=JSON.stringify({types:{EIP712Domain:k,MetaTransaction:A},domain:T,primaryType:"MetaTransaction",message:n}),window.web3.currentProvider.sendAsync({jsonrpc:"2.0",id:999999999999,method:"eth_signTypedData_v4",params:[window.ethereum.selectedAddress,s]},function(){var e=Object(d.a)(l.a.mark((function e(t,n){var s,r,o,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=2;break}return e.abrupt("return",console.error(t));case 2:console.log("Signature result from wallet :"),console.log(n),n&&n.result?(s=n.result.substring(2),r="0x"+s.substring(0,64),o="0x"+s.substring(64,128),i=parseInt(s.substring(128,130),16),console.log(r,"r"),console.log(o,"s"),console.log(i,"v"),console.log(window.ethereum.address,"userAddress"),console.log(x,"newQuote"),a.methods.setQuoteMeta(window.ethereum.selectedAddress,x,r,o,i).send({from:window.ethereum.selectedAddress}).on("transactionHash",(function(e){E("Transaction sent successfully. Check Console for Transaction hash"),console.log("Transaction Hash is ",e)})).once("confirmation",(function(e,t){t.status?(v("Transaction processed successfully"),j()):h("Transaction Failed"),console.log(t)}))):h("Could not get user signature. Check console logs for error");case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){if(window.ethereum){var e=new w.a(window.ethereum,{dappId:"dd3713aa37fa4657996adc8ea1451769",apiKey:"0-kIG9Gj_.458de11b-c7b9-4a6d-9c54-634274a24325"});s=new f.a(e),e.onEvent(e.READY,Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.ethereum.enable();case 2:a=new s.eth.Contract(g.contract.abi,g.contract.address),j();case 4:case"end":return e.stop()}}),e)})))).onEvent(e.ERROR,(function(e,t){console.log(e)}))}else h("Metamask is required to use this DApp")}),[]),o.a.createElement("div",{className:"App"},"*Use this DApp only on Mumbai Network",o.a.createElement("header",{className:"App-header"},o.a.createElement("h1",null,"Quotes"),o.a.createElement("section",{className:"main"},o.a.createElement("div",{className:"mb-wrap mb-style-2"},o.a.createElement("blockquote",{cite:"http://www.gutenberg.org/ebboks/11"},o.a.createElement("h4",null,m," "))),o.a.createElement("div",{className:"mb-attribution"},o.a.createElement("p",{className:"mb-author"},"- ",n))),o.a.createElement("section",null,o.a.createElement("div",{className:"submit-container"},o.a.createElement("div",{className:"submit-row"},o.a.createElement("input",{size:"100","border-radius":"15",type:"text",placeholder:"Enter your quote",onChange:function(e){N(e.target.value)},value:x}),o.a.createElement("button",{type:"button",className:"button",onClick:function(){return Q.apply(this,arguments)}},"Submit"))))),o.a.createElement(b.NotificationContainer,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(O,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[202,1,2]]]);
//# sourceMappingURL=main.7ebba2fc.chunk.js.map